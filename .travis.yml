language: go
go:
  - 1.13.x

env:
  global:
  - CODECOV_TOKEN="8c18c993-fc6e-4706-998b-01ddc7987804"
  - GECKO_HOME=$GOPATH/src/github.com/$TRAVIS_REPO_SLUG/
  - E2E_TEST_HOME=$GOPATH/src/github.com/ava-labs/avalanche-testing/
  - COMMIT=${TRAVIS_COMMIT::8}
  - DOCKERHUB_REPO=avaplatform/gecko


jobs:
  include:
    - stage: lint
      os: linux
      dist: bionic 
      script:
        - .ci/lint.sh

    - stage: build 
      os: linux
      dist: bionic 
      script:
        - .ci/build_and_test.sh
        - .ci/run_docker.sh
        - .ci/run_e2e_tests.sh
        - .ci/after_success.sh

    - stage: build 
      os: osx
      osx_image: xcode11.4
      script:
        - .ci/build_and_test.sh
